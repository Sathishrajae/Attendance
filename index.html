<!DOCTYPE html>
<html>
<head>
  <title>Attendance</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js"></script>
</head>
<body>
  <div class="login-container">
    <h1>Student Attendance</h1>
    <input type="text" id="ecNumber" placeholder="Enter EC Number">
    <button id="submitAttendance">Submit</button>
    <p id="message"></p>
  </div>

  <script>
   // Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
const firebaseConfig = {
  apiKey: "AIzaSyADAKEKN-Sc3TGaKkHV08iDSguWQJTj4TU",
  authDomain: "attendance-app-1b264.firebaseapp.com",
  projectId: "attendance-app-1b264",
  storageBucket: "attendance-app-1b264.firebasestorage.app",
  messagingSenderId: "582507361923",
  appId: "1:582507361923:web:858eda446e7ac4636ccdb6"
};

// Initialize Firebase

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    document.getElementById('submitAttendance').onclick = async () => {
      const ec = document.getElementById('ecNumber').value.trim();
      const submitted = localStorage.getItem('submittedEC');
      if (!ec) return alert("Please enter your EC number");
      if (submitted) return alert("You have already submitted attendance");

      try {
        await db.collection('attendance').add({
          ec: ec,
          timestamp: new Date()
        });
        localStorage.setItem('submittedEC', ec);
        alert("Attendance Submitted");
      } catch (e) {
        console.error(e);
        alert("Failed to submit attendance");
      }
    };
  </script>
</body>
</html>
