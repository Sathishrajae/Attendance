<!DOCTYPE html>
<html>
<head>
  <title>Admin Dashboard</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
  <h1>Admin Dashboard</h1>
  <button onclick="generatePDF()">Export Attendance PDF</button>
  <button onclick="logout()">Logout</button>

  <script>
    if (localStorage.getItem('adminLoggedIn') !== 'true') {
      window.location = 'admin_login.html';
    }

    // Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
const firebaseConfig = {
  apiKey: "AIzaSyADAKEKN-Sc3TGaKkHV08iDSguWQJTj4TU",
  authDomain: "attendance-app-1b264.firebaseapp.com",
  projectId: "attendance-app-1b264",
  storageBucket: "attendance-app-1b264.firebasestorage.app",
  messagingSenderId: "582507361923",
  appId: "1:582507361923:web:858eda446e7ac4636ccdb6"
};

// Initialize Firebase

    
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    async function generatePDF() {
      const snapshot = await db.collection("attendance").get();
      const list = snapshot.docs.map((doc, i) => `${i + 1}. EC: ${doc.data().ec}`);
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      doc.setFontSize(16);
      doc.text("Attendance Report", 20, 20);
      list.forEach((line, i) => doc.text(line, 20, 30 + i * 10));
      doc.save("attendance.pdf");
    }

    function logout() {
      localStorage.removeItem('adminLoggedIn');
      window.location = 'admin_login.html';
    }
  </script>
</body>
</html>
